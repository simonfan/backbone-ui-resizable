//     backbone-ui-resizable
//     (c) simonfan
//     backbone-ui-resizable is licensed under the MIT terms.

define("__backbone-ui-resizable/build-handles",["require","exports","module","jquery","lodash"],function(i,e,t){function s(i,e){var t=e.clss,s=l("<div></div>");return s.addClass(t).addClass(t+"-"+i),s.insertAfter(this.$el)}function n(i,e){if(a.isArray(i)){var t=a.map(i,function(i){return s.call(this,i,e)},this);return a.zipObject(i,t)}return a.isObject(i)?a.mapValues(i,function(i,t){return i=a.isObject(i)?i:this.$el.find(i),0!==i.length?i:s.call(this,t,e)},this):a.isString(i)?(i=i.replace(" ",""),i=i.split(","),n.call(this,i,e)):void 0}function h(i,e){return a.mapValues(i,function(i,t){return this.handleBuilder(a.extend({},e,{el:i,direction:t,resizable:this,thickness:a.isNumber(e.thickness)?e.thickness:e.thickness[t],ratio:a.isNumber(e.ratio)?e.ratio:e.ratio[t],canvas:this.$canvas}))},this)}var l=i("jquery"),a=i("lodash");t.exports=function(i){var e=(i.directions,n.call(this,i.directions,i));this.handles=h.call(this,e,i)}}),define("__backbone-ui-resizable/handle/helpers",["require","exports","module"],function(i,e){e.min=function(i,e){return isNaN(i)?e:isNaN(e)?i:e>i?i:e},e.max=function(i,e){return isNaN(i)?e:isNaN(e)?i:i>e?i:e},e.numberify=function(i){var e=parseInt(i,10);if(isNaN(e))throw new Error(i+" not number");return e}}),define("__backbone-ui-resizable/handle/update",["require","exports","module","./helpers"],function(i,e){function t(i){this.model.set("top",o.numberify(this.resizable.model.get("top"))+o.numberify(i))}function s(i){this.model.set("top",o.numberify(this.resizable.model.get("top"))+o.numberify(this.resizable.model.get("height"))+o.numberify(i))}function n(i){this.model.set("left",o.numberify(this.resizable.model.get("left"))+o.numberify(i))}function h(i){this.model.set("left",o.numberify(this.resizable.model.get("left"))+o.numberify(this.resizable.model.get("width"))+o.numberify(i))}function l(){this.model.set("width",o.numberify(this.resizable.model.get("width")))}function a(){this.model.set("height",o.numberify(this.resizable.model.get("height")))}var o=i("./helpers");e.n=function(){t.call(this,-1*this.outer),n.call(this,0),l.call(this)},e.s=function(){s.call(this,-1*this.inner),n.call(this,0),l.call(this)},e.w=function(){n.call(this,-1*this.outer),t.call(this,0),a.call(this)},e.e=function(){h.call(this,-1*this.inner),t.call(this,0),a.call(this)},e.nw=function(){t.call(this,-1*this.outer),n.call(this,-1*this.outer)},e.ne=function(){t.call(this,-1*this.outer),h.call(this,-1*this.inner)},e.sw=function(){s.call(this,-1*this.inner),n.call(this,-1*this.outer)},e.se=function(){s.call(this,-1*this.inner),h.call(this,-1*this.inner)}}),define("__backbone-ui-resizable/handle/track",["require","exports","module","./helpers"],function(i,e){var t=i("./helpers");e.all=function(){this.listenTo(this.resizable.model,"change",this.update)},e.n=function(){var i=this.resizable.model;this.resizable.listenTo(this,"move-y",function(e,s){s=t.numberify(s);var n=t.numberify(i.get("height")),h=t.numberify(i.get("top"));i.set({height:n-s,top:h+s})},this)},e.s=function(){var i=this.resizable.model;this.resizable.listenTo(this,"move-y",function(e,s){var n=t.numberify(i.get("height"))+t.numberify(s);i.set("height",n)})},e.w=function(){var i=this.resizable.model;this.resizable.listenTo(this,"move-x",function(e,s){s=t.numberify(s);var n=t.numberify(i.get("width")),h=t.numberify(i.get("left"));i.set({width:n-s,left:h+s})})},e.e=function(){var i=this.resizable.model;this.resizable.listenTo(this,"move-x",function(e,s){var n=t.numberify(i.get("width"))+t.numberify(s);i.set("width",n)})}}),define("__backbone-ui-resizable/handle/min-max",["require","exports","module","./helpers"],function(i,e){var t=i("./helpers");e.n=function(){var i=this.resizable.model,e=i.get("height"),s=i.get("minHeight"),n=i.get("maxHeight"),h=n-e,l=e-s,a=i.get("minY")||0,o=this.model.get("top");this.model.set({minY:t.max(o-h,a)-this.outer,maxY:o+this.thickness+l})},e.s=function(){var i=this.resizable.model,e=i.get("height"),s=i.get("minHeight"),n=i.get("maxHeight"),h=e-s,l=n-e,a=i.get("maxY")||0,o=this.model.get("top");this.model.set({minY:o-h,maxY:t.min(o+l,a)+this.outer})},e.w=function(){var i=this.resizable.model,e=i.get("width"),s=i.get("minWidth"),n=i.get("maxWidth"),h=n-e,l=e-s,a=i.get("minX")||0,o=this.model.get("left");this.model.set({minX:t.max(o-h,a)-this.outer,maxX:o+this.thickness+l})},e.e=function(){var i=this.resizable.model,e=i.get("width"),s=i.get("minWidth"),n=i.get("maxWidth"),h=e-s,l=n-e,a=i.get("maxX"),o=this.model.get("left");this.model.set({minX:o-h,maxX:t.min(o+l,a)+this.outer})}}),define("__backbone-ui-resizable/handle/index",["require","exports","module","jquery-ui","backbone-ui-draggable","lodash","./update","./track","./min-max"],function(i,e,t){i("jquery-ui");{var s=i("backbone-ui-draggable"),n=i("lodash"),h=i("./update"),l=i("./track"),a=i("./min-max"),o={n:"left top",s:"left bottom",w:"left top",e:"right top",nw:"left top",ne:"right top",sw:"left bottom",se:"right bottom"},r={n:"y",s:"y",w:"x",e:"x",nw:"xy",ne:"xy",sw:"xy",se:"xy"};t.exports=s.extend({initialize:function(i){s.prototype.initialize.call(this,i),this.initializeResizableHandle(i)},initializeResizableHandle:function(i){this.resizable=i.resizable,this.direction=i.direction,this.axis=r[this.direction],this.thickness=i.thickness,this.setStyles(),this.ratio=i.ratio,this.outer=i.thickness*this.ratio,this.inner=i.thickness-this.outer,this.update=n.throttle(n.bind(h[this.direction],this),20),this.initializePosition(i),this.track(),this.on("movestart",this.calcMinMax)},setStyles:function(){var i,e=this.axis;e.length>1?i={zIndex:100,width:this.thickness,height:this.thickness}:"x"===e?i={zIndex:99,width:this.thickness,height:this.resizable.model.get("width")}:"y"===e&&(i={zIndex:99,width:this.resizable.model.get("height"),height:this.thickness}),this.$el.css(i)},calcCenter:function(i){this.center={x:this.$el.width()*i,y:this.$el.height()*i}},initializePosition:function(){var i=this.$el;i.position({my:"center center",at:o[this.direction],of:this.resizable.$el}),this.model.set(i.position()),this.update()},track:function(){n.each(this.direction,function(i){l[i].call(this)},this),l.all.call(this)},calcMinMax:function(){n.each(this.direction,function(i){a[i].call(this)},this)},map:n.extend(s.prototype.map,{height:"->css:height",width:"->css:width"})})}}),define("backbone-ui-resizable",["require","exports","module","lowercase-backbone","backbone-ui-draggable","jquery","lodash","./__backbone-ui-resizable/build-handles","./__backbone-ui-resizable/handle/index"],function(i,e,t){function s(i){return c.test(i)?i+"px":i}{var n=i("lowercase-backbone"),h=i("backbone-ui-draggable"),l=i("jquery"),a=i("lodash"),o=i("./__backbone-ui-resizable/build-handles"),r=i("./__backbone-ui-resizable/handle/index"),c=/^[0-9]+$/;t.exports=h.extend({initialize:function(i){n.view.prototype.initialize.call(this,i),this.initializeModelDock(i),this.initializeUIDraggable(i),this.initializeUIResizable(i)},initializeUIResizable:function(i){this.$canvas=i.canvas||this.canvas||l(window);var e=a.extend({minWidth:2*this.handleOptions.thickness,minHeight:2*this.handleOptions.thickness,width:this.$el.width(),height:this.$el.height()},this.$el.position(),i);this.model.set(e);var t=a.defaults(a.pick(i,["directions","clss","ratio","thickness"]),this.handleOptions);o.call(this,t)},handleBuilder:r,handleOptions:{directions:"n,s,w,e,nw,ne,sw,se",clss:"handle",ratio:.2,thickness:30},stringifiers:{height:s,minHeight:s,maxHeight:s,width:s,minWidth:s,maxWidth:s,left:s,top:s},map:{top:"->css:top",left:"->css:left",width:"->css:width",minWidth:"->css:min-width",maxWidth:"->css:max-width",height:"->css:height",minHeight:"->css:min-height",maxHeight:"->css:max-height"}})}});