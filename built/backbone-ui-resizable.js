//     backbone-ui-resizable
//     (c) simonfan
//     backbone-ui-resizable is licensed under the MIT terms.

define("__backbone-ui-resizable/handle/helpers",["require","exports","module","lodash"],function(e,i){var t=e("lodash");i.min=function(e,i){return isNaN(e)?i:isNaN(i)?e:i>e?e:i},i.max=function(e,i){return isNaN(e)?i:isNaN(i)?e:e>i?e:i},i.numberify=function(e){var i=parseFloat(e);if(isNaN(i))throw new Error(e+" not number");return i},i.numberifyProperties=function(e,i){var n={};return t.each(e,function(e){n[e]=parseFloat(i[e])}),n},i.fitValueWithin=function(e,i,t){return isNaN(i)||(e=e>i?e:i),isNaN(t)||(e=t>e?e:t),e};var n=/^-?\d*(\.\d+)?$/;i.stringifyPositionalValue=function(e){return n.test(e)?e+"px":e}}),define("__backbone-ui-resizable/handle/update-position",["require","exports","module","./helpers"],function(e,i){function t(){this.modeld.set("top",-1*this.outer)}function n(){var e=+this.resizable.modeld.get("height");this.modeld.set("top",e-this.inner)}function s(){this.modeld.set("left",-1*this.outer)}function a(){var e=+this.resizable.modeld.get("width");this.modeld.set("left",e-this.inner)}function l(){var e=+this.resizable.modeld.get("width");this.modeld.set("width",e+2*this.outer)}function o(){var e=+this.resizable.modeld.get("height");this.modeld.set("height",e+2*this.outer)}e("./helpers");i.n=function(){t.call(this),s.call(this),l.call(this)},i.s=function(){n.call(this),s.call(this),l.call(this)},i.w=function(){s.call(this),t.call(this),o.call(this)},i.e=function(){a.call(this),t.call(this),o.call(this)},i.nw=function(){t.call(this),s.call(this)},i.ne=function(){t.call(this),a.call(this)},i.sw=function(){n.call(this),s.call(this)},i.se=function(){n.call(this),a.call(this)}}),define("__backbone-ui-resizable/handle/enable-disable",["require","exports","module"],function(e,i){i.disableHandle=function(){return this.disableDraggable(),this.$el.addClass(this.resizable.handleOptions.clss+"-disabled").removeClass(this.resizable.handleOptions.clss+"-enabled"),this},i.enableHandle=function(){return this.enableDraggable(),this.$el.addClass(this.resizable.handleOptions.clss+"-enabled").removeClass(this.resizable.handleOptions.clss+"-disabled"),this}}),define("__backbone-ui-resizable/handle/base",["require","exports","module","backbone-ui-draggable","lodash","./update-position","./enable-disable"],function(e,i,t){var n=e("backbone-ui-draggable"),s=e("lodash"),a=e("./update-position"),l={n:"y",s:"y",w:"x",e:"x",nw:"xy",ne:"xy",sw:"xy",se:"xy"},o=t.exports=n.extend({initialize:function(e){n.prototype.initialize.call(this,e),this.initializeResizableHandle(e)},initializeResizableHandle:function(e){this.resizable=e.resizable,this.direction=e.direction,this.axis=l[this.direction],this.thickness=e.thickness,this.ratio=e.ratio,this.outer=e.thickness*this.ratio,this.inner=e.thickness-this.outer,this.updatePosition=s.bind(a[this.direction],this),this.setStyles(),this.updatePosition(),this.enableHandle(),this.listenTo(this.resizable.modeld,"change",this.updatePosition),this.listenTo(this.resizable,"resizestop",this.updatePosition),this.resizable.listenTo(this,"movestart",function(){this.trigger("resizestart",this)}),this.resizable.listenTo(this,"movestop",function(){this.trigger("resizestop",this)})},setStyles:function(){var e,i=this.axis;i.length>1?e={zIndex:100,width:this.thickness,height:this.thickness}:"x"===i?e={zIndex:99,width:this.thickness,height:this.resizable.modeld.get("width")}:"y"===i&&(e={zIndex:99,width:this.resizable.modeld.get("height"),height:this.thickness}),this.$el.css(e)},map:s.extend(n.prototype.map,{height:"->css:height",width:"->css:width"})});o.proto(e("./enable-disable"))}),define("__backbone-ui-resizable/handle/index",["require","exports","module","./base"],function(e,i){function t(e,i){this.resizable.moveN(e,i);return 0}function n(e,i){var t=this.resizable.moveS(e,i);return e-t}function s(e,i){this.resizable.moveW(e,i);return 0}function a(e,i){var t=this.resizable.moveE(e,i);return e-t}var l=e("./base"),o={beforeMoveY:t},r={beforeMoveY:n},h={beforeMoveX:s},d={beforeMoveX:a};i.n=l.extend(o),i.s=l.extend(r),i.w=l.extend(h),i.e=l.extend(d),i.nw=l.extend(o).extend(h),i.ne=l.extend(o).extend(d),i.sw=l.extend(r).extend(h),i.se=l.extend(r).extend(d)}),define("__backbone-ui-resizable/helpers",["require","exports","module","lodash"],function(e,i){var t=e("lodash");i.min=function(e,i){return isNaN(e)?i:isNaN(i)?e:i>e?e:i},i.max=function(e,i){return isNaN(e)?i:isNaN(i)?e:e>i?e:i},i.numberify=function(e){var i=parseFloat(e);if(isNaN(i))throw new Error(e+" not number");return i},i.numberifyProperties=function(e,i){var n={};return t.each(e,function(e){n[e]=parseFloat(i[e])}),n},i.fitValueWithin=function(e,i,t){return isNaN(i)||(e=e>i?e:i),isNaN(t)||(e=t>e?e:t),e};var n=/^-?\d*(\.\d+)?$/;i.stringifyPositionalValue=function(e){return n.test(e)?e+"px":e}}),define("__backbone-ui-resizable/actions/e",["require","exports","module","lodash","../helpers"],function(e,i){var t=e("lodash"),n=e("../helpers");i.deltaE=function(e,i){if(i)return e;var t=this.modeld,s=+t.get("width"),a=+t.get("minWidth"),l=+t.get("maxWidth"),o=+t.get("left"),r=o+s,h=+t.get("minRight"),d=+t.get("maxRight"),u=n.max(a-s,h-r),c=n.min(l-s,d-r);return n.fitValueWithin(e,u,c)},i.moveE=function(e,i){i=i||{};var n=this.modeld,s=+n.get("width"),a=+this.deltaE(e,i.force);if(n.set("width",s+a),!i.silent&&0!==a){var l=t.assign({axis:"x",delta:-1*a,action:a>0?"expand":"contract",handle:"e"},i);this.trigger("resize",this,l).trigger("resize-x",this,l)}return e-a}}),define("__backbone-ui-resizable/actions/w",["require","exports","module","lodash","../helpers"],function(e,i){var t=e("lodash"),n=e("../helpers");i.deltaW=function(e,i){if(i)return e;var t=this.modeld,s=+t.get("width"),a=+t.get("minWidth"),l=+t.get("maxWidth"),o=+t.get("left"),r=+t.get("minLeft"),h=+t.get("maxLeft"),d=n.max(s-l,r-o),u=n.min(s-a,h-o);return n.fitValueWithin(e,d,u)},i.moveW=function(e,i){i=i||{};var n=this.modeld,s=+n.get("left"),a=+n.get("width"),l=+this.deltaW(e,i.force);if(n.set({left:s+l,width:a-l}),!i.silent&&0!==l){var o=t.assign({axis:"x",delta:-1*l,action:l>0?"contract":"expand",handle:"w"},i);this.trigger("resize",this,o).trigger("resize-x",this,o)}return e-l}}),define("__backbone-ui-resizable/actions/s",["require","exports","module","lodash","../helpers"],function(e,i){var t=e("lodash"),n=e("../helpers");i.deltaS=function(e,i){if(i)return e;var t=this.modeld,s=+t.get("height"),a=+t.get("minHeight"),l=+t.get("maxHeight"),o=+t.get("top"),r=o+s,h=+t.get("minBottom"),d=+t.get("maxBottom"),u=n.max(a-s,h-r),c=n.min(l-s,d-r);return n.fitValueWithin(e,u,c)},i.moveS=function(e,i){i=i||{};var n=this.modeld,s=+n.get("height"),a=+this.deltaS(e,i.force);if(n.set("height",s+a),!i.silent&&0!==a){var l=t.assign({axis:"y",delta:a,action:a>0?"expand":"contract",handle:"s"},i);this.trigger("resize",this,l).trigger("resize-y",this,l)}return e-a}}),define("__backbone-ui-resizable/actions/n",["require","exports","module","lodash","../helpers"],function(e,i){var t=e("lodash"),n=e("../helpers");i.deltaN=function(e,i){if(i)return e;var t=this.modeld,s=+t.get("height"),a=+t.get("minHeight"),l=+t.get("maxHeight"),o=+t.get("top"),r=+t.get("minTop"),h=+t.get("maxTop"),d=n.max(s-l,r-o),u=n.min(s-a,h-o);return n.fitValueWithin(e,d,u)},i.moveN=function(e,i){i=i||{};var n=this.modeld,s=+n.get("top"),a=+n.get("height"),l=+this.deltaN(e,i.force);if(n.set({top:s+l,height:a-l}),!i.silent&&0!==l){var o=t.assign({axis:"x",delta:-1*l,action:l>0?"contract":"expand",handle:"n"},i);this.trigger("resize",this,o).trigger("resize-y",this,o)}return e-l}}),define("__backbone-ui-resizable/actions/index",["require","exports","module"],function(e,i){i.expandToLeft=function(e,i){return i=i||{},i.agent=i.agent||"code",Math.abs(this.moveW(-1*e,i))},i.expandToRight=function(e,i){return i=i||{},i.agent=i.agent||"code",Math.abs(this.moveE(e,i))},i.expandToTop=function(e,i){return i=i||{},i.agent=i.agent||"code",Math.abs(this.moveN(-1*e,i))},i.expandToBottom=function(e,i){return i=i||{},i.agent=i.agent||"code",Math.abs(this.moveS(e,i))},i.contractToRight=function(e,i){return i=i||{},i.agent=i.agent||"code",Math.abs(this.moveW(e,i))},i.contractToLeft=function(e,i){return i=i||{},i.agent=i.agent||"code",Math.abs(this.moveE(-1*e,i))},i.contractToBottom=function(e,i){return i=i||{},i.agent=i.agent||"code",Math.abs(this.moveN(e,i))},i.contractToTop=function(e,i){return i=i||{},i.agent=i.agent||"code",Math.abs(this.moveS(-1*e,i))}}),define("__backbone-ui-resizable/animations",["require","exports","module"],function(e,i){function t(e){return function(i,t){t=t||{},i=e.positionDeltaMultiplier*Math.abs(i);var n=this[e.delta](i,t.force),s=parseFloat(this.modeld.get(e.dimension)),a={};a[e.dimension]=s+e.dimensionDeltaMultiplier*Math.abs(n);var l=t.complete;t.complete=_.bind(function(){return this.trigger("resizestop",this),l?l.apply(this.$el,arguments):void 0},this);var o=t.step;return t.step=_.bind(function(i){var t=Math.abs(i-s);return this[e.move](e.positionDeltaMultiplier*t,{force:!0}),s=i,o?o.apply(this.$el,arguments):void 0},this),this.trigger("resizestart",this),this.$el.animate(a,t),i-n}}i.aExpandToW=t({delta:"deltaW",move:"moveW",dimension:"width",positionDeltaMultiplier:-1,dimensionDeltaMultiplier:1}),i.aContractToE=t({delta:"deltaW",move:"moveW",dimension:"width",positionDeltaMultiplier:1,dimensionDeltaMultiplier:-1}),i.aExpandToE=t({delta:"deltaE",move:"moveE",dimension:"width",positionDeltaMultiplier:1,dimensionDeltaMultiplier:1}),i.aContractToW=t({delta:"deltaE",move:"moveE",dimension:"width",positionDeltaMultiplier:-1,dimensionDeltaMultiplier:-1}),i.aExpandToN=t({delta:"deltaN",move:"moveN",dimension:"height",positionDeltaMultiplier:-1,dimensionDeltaMultiplier:1}),i.aContractToS=t({delta:"deltaN",move:"moveN",dimension:"height",positionDeltaMultiplier:1,dimensionDeltaMultiplier:-1}),i.aExpandToS=t({delta:"deltaS",move:"moveS",dimension:"height",positionDeltaMultiplier:1,dimensionDeltaMultiplier:1}),i.aContractToN=t({delta:"deltaS",move:"moveS",dimension:"height",positionDeltaMultiplier:-1,dimensionDeltaMultiplier:-1})}),define("__backbone-ui-resizable/enable-disable",["require","exports","module"],function(e,i){i._initializeResizableEnableDisable=function(){this.listenTo(this.modeld,"change:resizableStatus",function(){this.resizableEnabled()?(_.each(this.handles,function(e){e.enableHandle()},this),this.$el.removeClass(this.resizableClass+"-disabled").addClass(this.resizableClass+"-enabled")):(_.each(this.handles,function(e){e.disableHandle()},this),this.$el.removeClass(this.resizableClass+"-enabled").addClass(this.resizableClass+"-disabled"))})},i.resizableEnabled=function(){return"enabled"===this.modeld.get("resizableStatus")},i.disableResizable=function(){return this.modeld.set("resizableStatus","disabled"),this},i.enableResizable=function(){return this.modeld.set("resizableStatus","enabled"),this},i.disableHandle=function(e){var i=this.handles[e];return i&&i.disableHandle(),this},i.enableHandle=function(e,i){var t=this.handles[e];return t?t.enableHandle():this.handles[e]=this.buildHandle(e,i),this}}),define("__backbone-ui-resizable/build-handle",["require","exports","module","jquery","lodash"],function(e,i){var t=e("jquery"),n=e("lodash");i.buildHandle$El=function(e,i){var n=i.clss,s=t("<div></div>");return s.addClass(n).addClass(n+"-"+e),s.appendTo(this.$el)},i.buildHandle=function(e,i){i=i||{},n.defaults(i,this.handleOptions);var t=i.ratio,s=i.thickness,a=n.extend({},i,{el:this.buildHandle$El(e,i),resizable:this,direction:e,ratio:n.isObject(t)?t[e]:t,thickness:n.isObject(s)?s[e]:s}),l=this.handleBuilder[e](a);return l}}),define("backbone-ui-resizable",["require","exports","module","lowercase-backbone","backbone-ui-draggable","jquery","lodash","./__backbone-ui-resizable/handle/index","./__backbone-ui-resizable/handle/helpers","./__backbone-ui-resizable/actions/e","./__backbone-ui-resizable/actions/w","./__backbone-ui-resizable/actions/s","./__backbone-ui-resizable/actions/n","./__backbone-ui-resizable/actions/index","./__backbone-ui-resizable/animations","./__backbone-ui-resizable/enable-disable","./__backbone-ui-resizable/build-handle"],function(e,i,t){var n=e("lowercase-backbone"),s=e("backbone-ui-draggable"),a=e("jquery"),l=e("lodash"),o=e("./__backbone-ui-resizable/handle/index"),r=e("./__backbone-ui-resizable/handle/helpers"),h=t.exports=s.extend({initialize:function(e){n.view.prototype.initialize.call(this,e),this.initializeModelView(e),this.initializeUIDraggable(e),this.initializeUIResizable(e)},initializeUIResizable:function(e){this.$canvas=e.canvas||this.canvas||a(window),e.enableDraggable||this.disableDraggable();var i=l.extend({minWidth:2*this.handleOptions.thickness,minHeight:2*this.handleOptions.thickness,width:this.$el.width(),height:this.$el.height()},this.$el.position(),e);this.modeld.set(i),this.handleOptions=l.extend(this.handleOptions,l.pick(e,["clss","ratio","thickness"]));var t=e.handles||this.handles;t=l.isArray(t)?t:t.split(","),this.handles={},l.each(t,function(e){this.handles[e]=this.buildHandle(e,this.handleOptions)},this),this._initializeResizableEnableDisable()},handleBuilder:o,handles:"n,s,w,e,nw,ne,sw,se",handleOptions:{clss:"handle",ratio:.2,thickness:30},stringifiers:{height:r.stringifyPositionalValue,minHeight:r.stringifyPositionalValue,maxHeight:r.stringifyPositionalValue,width:r.stringifyPositionalValue,minWidth:r.stringifyPositionalValue,maxWidth:r.stringifyPositionalValue,left:r.stringifyPositionalValue,top:r.stringifyPositionalValue},map:{top:"->css:top",left:"->css:left",width:"->css:width",minWidth:"->css:min-width",maxWidth:"->css:max-width",height:"->css:height",minHeight:"->css:min-height",maxHeight:"->css:max-height"}});h.proto(e("./__backbone-ui-resizable/actions/e")).proto(e("./__backbone-ui-resizable/actions/w")).proto(e("./__backbone-ui-resizable/actions/s")).proto(e("./__backbone-ui-resizable/actions/n")).proto(e("./__backbone-ui-resizable/actions/index")),h.proto(e("./__backbone-ui-resizable/animations")),h.proto(e("./__backbone-ui-resizable/enable-disable")).proto(e("./__backbone-ui-resizable/build-handle"))});