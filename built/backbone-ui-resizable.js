//     backbone-ui-resizable
//     (c) simonfan
//     backbone-ui-resizable is licensed under the MIT terms.

define("__backbone-ui-resizable/helpers",["require","exports","module","lodash"],function(e,i){function t(e){return!isNaN(e)}var n=e("lodash");i.min=function(e){return n(e).filter(t).min().value()},i.max=function(e){return n(e).filter(t).max().value()},i.fitValueWithin=function(e,t,n){var s=e;return s=i.max([s,t]),s=i.min([s,n])}}),define("__backbone-ui-resizable/initialize-model",["require","exports","module","./helpers"],function(e,i,t){e("./helpers");t.exports=function(){{var e=this.model;this.$el}e.set(this.resizableOptions),e.set({width:this.$el.width(),height:this.$el.height(),top:this.$el.position().top,left:this.$el.position().left}),this.listenTo(e,"change",function(e){this.$el.resizable("option",e.toJSON())},this)}}),define("__backbone-ui-resizable/handle-resize",["require","exports","module"],function(e,i,t){t.exports=function(e,i){var t=this.model,n=t.get("width"),s=t.get("height"),o=t.get("left"),r=t.get("top");i.size.width!==n&&this.resizeWidth(i.size.width-n,!1),i.size.height!==s&&this.resizeHeight(i.size.height-s,!1),i.position.left!==o&&this.moveX(i.position.left-o,!1),i.position.top!==r&&this.moveY(i.position.top-r,!1)}}),define("__backbone-ui-resizable/actions/move/index",["require","exports","module","../../helpers"],function(e,i){var t=e("../../helpers");i.moveX=function(e){var i=this.model,n=i.get("left"),s=n+e,o=t.fitValueWithin(s,i.get("minX"),i.get("maxX")-i.get("width"));return i.set("left",o),s-o},i.moveY=function(e){var i=this.model,n=i.get("top"),s=n+e,o=t.fitValueWithin(s,i.get("minY"),i.get("maxY")-i.get("height"));return i.set("top",o),s-o},i.moveToLeft=function(e){return this.moveX(-1*e)},i.moveToRight=function(e){return this.moveX(e)},i.moveToTop=function(e){return this.moveY(-1*e)},i.moveToBottom=function(e){return this.moveY(e)}}),define("__backbone-ui-resizable/actions/resize/contract",["require","exports","module"],function(e,i){i.contractToRight=function(e,i){var t=this.resizeWidth(-1*e,i);t=-1*t;var n=e-t;return this.moveX(n),t},i.contractToLeft=function(e,i){return-1*this.resizeWidth(-1*e,i)},i.contractToBottom=function(e,i){var t=this.resizeHeight(-1*e,i);t=-1*t;var n=e-t;return this.moveY(n),t},i.contractToTop=function(e,i){var t=this.resizeHeight(-1*e,i);return-1*t}}),define("__backbone-ui-resizable/actions/resize/expand",["require","exports","module"],function(e,i){i.expandToLeft=function(e,i){var t=this.resizeWidth(e,i),n=e-t;return this.moveX(-1*n),t},i.expandToRight=function(e,i){return this.resizeWidth(e,i)},i.expandToTop=function(e,i){var t=this.resizeHeight(e,i),n=e-t;return this.moveY(-1*n),t},i.expandToBottom=function(e,i){return this.resizeWidth(e,i)}}),define("__backbone-ui-resizable/actions/resize/index",["require","exports","module","lodash","../../helpers","./contract","./expand"],function(e,i){var t=e("lodash"),n=e("../../helpers");i.resizeWidth=function(e,i){var t=this.model,s=t.get("width")+e,o=n.fitValueWithin(s,t.get("minWidth"),t.get("maxWidth"));t.set("width",o);var r=t.previous("width")||0,a=o-r;if(a&&!i){var h={axis:"x",delta:a,action:a>0?"expansion":"contraction"};this.trigger("resize",this,h).trigger("resize-width",this,h)}return s-o},i.resizeHeight=function(e){var i=this.model,t=i.get("height")+e,s=n.fitValueWithin(t,i.get("minHeight"),i.get("maxHeight"));i.set("height",s);var o=i.previous("height")||0,r=s-o;if(r){var a={axis:"y",delta:r,action:r>0?"expansion":"contraction"};this.trigger("resize",this,a).trigger("resize-height",this,a)}return t-s},t.assign(i,e("./contract")),t.assign(i,e("./expand"))}),define("backbone-ui-resizable",["require","exports","module","jquery-ui-resizable","lowercase-backbone","model-dock","lodash","./__backbone-ui-resizable/initialize-model","./__backbone-ui-resizable/handle-resize","./__backbone-ui-resizable/actions/move/index","./__backbone-ui-resizable/actions/resize/index"],function(e,i,t){function n(e){return l.test(e)?e+"px":e}e("jquery-ui-resizable");var s=e("lowercase-backbone"),o=e("model-dock"),r=e("lodash"),a=e("./__backbone-ui-resizable/initialize-model"),h=["alsoResize","animate","animateDuration","animateEasing","aspectRatio","autoHide","cancel","containment","delay","disabled","distance","ghost","grid","handles","helper","maxHeight","maxWidth","minHeight","minWidth"],l=/^[0-9]+$/,u=t.exports=o.extend({initialize:function(){s.view.prototype.initialize.apply(this,arguments),this.initializeModelDock.apply(this,arguments),this.initializeUIResizable.apply(this,arguments)},initializeUIResizable:function(e){r.bindAll(this,"handleElResize","handleElResizeStart","handleElResizeStop","rebuildResizableEl"),this.resizableOptions=r.defaults(r.pick(e,h),this.resizableOptions),this.$el.resizable(this.resizableOptions).on("resize",this.handleElResize).on("resizestart",this.handleElResizeStart).on("resizestop",this.handleElResizeStop),a.apply(this,arguments)},rebuildResizableEl:function(){this.$el.resizable("destroy").resizable(this.model.attributes)},handleElResize:e("./__backbone-ui-resizable/handle-resize"),handleElResizeStart:function(){this.trigger("resizestart",this)},handleElResizeStop:function(){this.trigger("resizestop",this)},resizableOptions:{handles:"n,ne,e,se,s,sw,w,nw"},rebuildOnChange:["handles","maxHeight","maxWidth","minHeight","minWidth"],stringifiers:{height:n,minHeight:n,maxHeight:n,width:n,minWidth:n,maxWidth:n,left:n,top:n},map:{top:"->css:top",left:"->css:left",width:"->css:width",minWidth:"->css:min-width",maxWidth:"->css:max-width",height:"->css:height",minHeight:"->css:min-height",maxHeight:"->css:max-height"}});u.proto(e("./__backbone-ui-resizable/actions/move/index")).proto(e("./__backbone-ui-resizable/actions/resize/index"))});