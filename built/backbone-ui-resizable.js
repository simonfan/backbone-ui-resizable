//     backbone-ui-resizable
//     (c) simonfan
//     backbone-ui-resizable is licensed under the MIT terms.

define("__backbone-ui-resizable/handle/helpers",["require","exports","module","lodash"],function(e,t){var i=e("lodash");t.min=function(e,t){return isNaN(e)?t:isNaN(t)?e:t>e?e:t},t.max=function(e,t){return isNaN(e)?t:isNaN(t)?e:e>t?e:t},t.numberify=function(e){var t=parseFloat(e);if(isNaN(t))throw new Error(e+" not number");return t},t.numberifyProperties=function(e,t){var a={};return i.each(e,function(e){a[e]=parseFloat(t[e])}),a};var a=/^-?\d*(\.\d+)?$/;t.stringifyPositionalValue=function(e){return a.test(e)?e+"px":e}}),define("__backbone-ui-resizable/handle/update-position",["require","exports","module","./helpers","no"],function(e,t){function i(e){var t=h(this.resizable.model.get("top")).add(e);this.model.set("top",t.value())}function a(e){var t=h(this.resizable.model.get("top"));t.add(this.resizable.model.get("height")).add(e),this.model.set("top",t.value())}function s(e){var t=h(this.resizable.model.get("left"));this.model.set("left",t.add(e).value())}function n(e){var t=h(this.resizable.model.get("left"));t.add(this.resizable.model.get("width")).add(e),this.model.set("left",t.value())}function l(){this.model.set("width",h(this.resizable.model.get("width")).value())}function o(){this.model.set("height",h(this.resizable.model.get("height")).value())}var h=(e("./helpers"),e("no"));t.n=function(){i.call(this,-1*this.outer),s.call(this,0),l.call(this)},t.s=function(){a.call(this,-1*this.inner),s.call(this,0),l.call(this)},t.w=function(){s.call(this,-1*this.outer),i.call(this,0),o.call(this)},t.e=function(){n.call(this,-1*this.inner),i.call(this,0),o.call(this)},t.nw=function(){i.call(this,-1*this.outer),s.call(this,-1*this.outer)},t.ne=function(){i.call(this,-1*this.outer),n.call(this,-1*this.inner)},t.sw=function(){a.call(this,-1*this.inner),s.call(this,-1*this.outer)},t.se=function(){a.call(this,-1*this.inner),n.call(this,-1*this.inner)}}),define("__backbone-ui-resizable/handle/track",["require","exports","module","lodash","./helpers"],function(e,t){var i=e("lodash"),a=e("./helpers");t.all=function(){var e=this.resizable;e.listenTo(this,"movestart",function(){this.trigger("resizestart",e)}),e.listenTo(this,"movestop",function(){this.trigger("resizestop",e)}),this.listenTo(e.model,"change",this.updatePosition)},t.n=function(){var e=this.resizable,t=this.direction;e.listenTo(this,"move-y",function(e,s){var n=this.model,l=a.numberify(s.delta),o=a.numberify(n.get("height")),h=a.numberify(n.get("top"));if(n.set({height:o-l,top:h+l}),!s.silent){var r=l>0?"contract":"expand";s=i.assign({action:r,handle:t},s),this.trigger("resize",this,s).trigger("resize-y",this,s).trigger(r,this,s).trigger(r+"y",this,s)}},e)},t.s=function(){var e=this.resizable,t=this.direction;e.listenTo(this,"move-y",function(e,s){var n=this.model,l=a.numberify(n.get("height"))+a.numberify(s.delta);if(n.set("height",l),!s.silent){var o=s.delta>0?"expand":"contract";s=i.assign({action:o,handle:t},s),this.trigger("resize",this,s).trigger("resize-y",this,s).trigger(o,this,s).trigger(o+"y",this,s)}},e)},t.w=function(){var e=this.resizable,t=this.direction;e.listenTo(this,"move-x",function(e,s){var n=this.model,l=a.numberify(s.delta),o=a.numberify(n.get("width")),h=a.numberify(n.get("left"));if(n.set({width:o-l,left:h+l}),!s.silent){var r=l>0?"contract":"expand";s=i.assign({action:r,handle:t},s),this.trigger("resize",this,s).trigger("resize-x",this,s).trigger(r,this,s).trigger(r+"x",this,s)}},e)},t.e=function(){var e=this.resizable,t=this.direction;e.listenTo(this,"move-x",function(e,s){var n=this.model,l=a.numberify(n.get("width"))+a.numberify(s.delta);if(n.set("width",l),!s.silent){var o=s.delta>0?"expand":"contract";s=i.assign({action:o,handle:t},s),this.trigger("resize",this,s).trigger("resize-x",this,s).trigger(o,this,s).trigger(o+"x",this,s)}},e)}}),define("__backbone-ui-resizable/handle/min-max",["require","exports","module","no","./helpers"],function(e,t){var i=e("no"),a=e("./helpers");t.n=function(){var e=this.resizable.model,t=e.get("height"),s=e.get("minHeight"),n=e.get("maxHeight"),l=n-t,o=t-s,h=e.get("minTop")||0,r=e.get("maxTop"),d=this.model.get("top");this.model.set({minTop:a.max(i(d).subtract(l).subtract(this.outer).value(),i(h).subtract(this.outer).value()),maxTop:a.min(i(d).add(o).value(),i(r).subtract(this.outer).value())})},t.s=function(){var e=this.resizable.model,t=e.get("height"),s=e.get("minHeight"),n=e.get("maxHeight"),l=t-s,o=n-t,h=e.get("minBottom"),r=e.get("maxBottom"),d=this.model.get("top");this.model.set({minBottom:a.max(i(d).subtract(l).add(this.thickness).value(),i(h).add(this.outer).value()),maxBottom:a.min(i(d).add(o).add(this.thickness).value(),i(r).add(this.outer).value())})},t.w=function(){var e=this.resizable.model,t=e.get("width"),s=e.get("minWidth"),n=e.get("maxWidth"),l=n-t,o=t-s,h=e.get("minLeft")||0,r=e.get("maxLeft"),d=this.model.get("left");this.model.set({minLeft:a.max(i(d).subtract(l).subtract(this.outer).value(),i(h).subtract(this.outer).value()),maxLeft:a.min(i(d).add(o).subtract(this.outer).value(),i(r).subtract(this.outer).value())})},t.e=function(){var e=this.resizable.model,t=e.get("width"),s=e.get("minWidth"),n=e.get("maxWidth"),l=t-s,o=n-t,h=e.get("minRight"),r=e.get("maxRight"),d=this.model.get("left");this.model.set({minRight:a.max(i(d).subtract(l).add(this.thickness).value(),i(h).add(this.outer).value()),maxRight:a.min(i(d).add(this.thickness).add(o).value(),i(r).add(this.outer).value())})}}),define("__backbone-ui-resizable/handle/enable-disable",["require","exports","module"],function(e,t){t.disableHandle=function(){return this.disableDraggable(),this.$el.addClass(this.resizable.handleOptions.clss+"-disabled").removeClass(this.resizable.handleOptions.clss+"-enabled"),this},t.enableHandle=function(){return this.enableDraggable(),this.$el.addClass(this.resizable.handleOptions.clss+"-enabled").removeClass(this.resizable.handleOptions.clss+"-disabled"),this}}),define("__backbone-ui-resizable/handle/index",["require","exports","module","jquery-ui","backbone-ui-draggable","lodash","./update-position","./track","./min-max","./enable-disable"],function(e,t,i){e("jquery-ui");var a=e("backbone-ui-draggable"),s=e("lodash"),n=e("./update-position"),l=e("./track"),o=e("./min-max"),h={n:"left top",s:"left bottom",w:"left top",e:"right top",nw:"left top",ne:"right top",sw:"left bottom",se:"right bottom"},r={n:"y",s:"y",w:"x",e:"x",nw:"xy",ne:"xy",sw:"xy",se:"xy"},d=i.exports=a.extend({initialize:function(e){a.prototype.initialize.call(this,e),this.initializeResizableHandle(e)},initializeResizableHandle:function(e){this.resizable=e.resizable,this.direction=e.direction,this.axis=r[this.direction],this.thickness=e.thickness,this.ratio=e.ratio,this.outer=e.thickness*this.ratio,this.inner=e.thickness-this.outer,this.updatePosition=s.throttle(s.bind(n[this.direction],this),20),this.setStyles(),this.initializePosition(e),this.track(),this.on("movestart",this.calcMinMax),this.enableHandle()},setStyles:function(){var e,t=this.axis;t.length>1?e={zIndex:100,width:this.thickness,height:this.thickness}:"x"===t?e={zIndex:99,width:this.thickness,height:this.resizable.model.get("width")}:"y"===t&&(e={zIndex:99,width:this.resizable.model.get("height"),height:this.thickness}),this.$el.css(e)},initializePosition:function(){var e=this.$el;e.position({my:"center center",at:h[this.direction],of:this.resizable.$el});var t=e.position();this.model.set({top:parseFloat(t.top),left:parseFloat(t.left)}),this.updatePosition()},track:function(){s.each(this.direction,function(e){l[e].call(this)},this),l.all.call(this)},calcMinMax:function(){s.each(this.direction,function(e){o[e].call(this)},this)},map:s.extend(a.prototype.map,{height:"->css:height",width:"->css:width"})});d.proto(e("./enable-disable"))}),define("__backbone-ui-resizable/actions",["require","exports","module"],function(e,t){t.expandToLeft=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.w;return i.calcMinMax(),i.moveToLeft(e,t)},t.expandToRight=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.e;return i.calcMinMax(),i.moveToRight(e,t)},t.expandToTop=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.n;return i.calcMinMax(),i.moveToTop(e,t)},t.expandToBottom=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.s;return i.calcMinMax(),i.moveToBottom(e,t)},t.contractToRight=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.w;return i.calcMinMax(),i.moveToRight(e,t)},t.contractToLeft=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.e;return i.calcMinMax(),i.moveToLeft(e,t)},t.contractToBottom=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.n;return i.calcMinMax(),i.moveToBottom(e,t)},t.contractToTop=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.s;return i.calcMinMax(),i.moveToTop(e,t)}}),define("__backbone-ui-resizable/animations",["require","exports","module"],function(e,t){t.aExpandToLeft=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.w;return i.calcMinMax(),i.animateToLeft(e,t)},t.aExpandToRight=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.e;return i.calcMinMax(),i.animateToRight(e,t)},t.aExpandToTop=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.n;return i.calcMinMax(),i.animateToTop(e,t)},t.aExpandToBottom=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.s;return i.calcMinMax(),i.animateToBottom(e,t)},t.aContractToRight=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.w;return i.calcMinMax(),i.animateToRight(e,t)},t.aContractToLeft=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.e;return i.calcMinMax(),i.animateToLeft(e,t)},t.aContractToBottom=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.n;return i.calcMinMax(),i.animateToBottom(e,t)},t.aContractToTop=function(e,t){t=t||{},t.agent=t.agent||"code";var i=this.handles.s;return i.calcMinMax(),i.animateToTop(e,t)}}),define("__backbone-ui-resizable/enable-disable",["require","exports","module"],function(e,t){t._initializeResizableEnableDisable=function(){this.listenTo(this.model,"change:resizable-status",function(){this.resizableEnabled()?(_.each(this.handles,function(e){e.enableHandle()},this),this.$el.removeClass(this.resizableClass+"-disabled").addClass(this.resizableClass+"-enabled")):(_.each(this.handles,function(e){e.disableHandle()},this),this.$el.removeClass(this.resizableClass+"-enabled").addClass(this.resizableClass+"-disabled"))})},t.resizableEnabled=function(){return"enabled"===this.model.get("resizable-status")},t.disableResizable=function(){return this.model.set("resizable-status","disabled"),this},t.enableResizable=function(){return this.model.set("resizable-status","enabled"),this},t.disableHandle=function(e){var t=this.handles[e];return t&&t.disableHandle(),this},t.enableHandle=function(e,t){var i=this.handles[e];return i?i.enableHandle():this.handles[e]=this.buildHandle(e,t),this}}),define("__backbone-ui-resizable/build-handle",["require","exports","module","jquery","lodash"],function(e,t){var i=e("jquery"),a=e("lodash");t.buildHandle$El=function(e,t){var a=t.clss,s=i("<div></div>");return s.addClass(a).addClass(a+"-"+e),s.insertAfter(this.$el)},t.buildHandle=function(e,t){t=t||{},a.defaults(t,this.handleOptions);var i=t.ratio,s=t.thickness,n=a.extend({},t,{el:this.buildHandle$El(e,t),resizable:this,direction:e,ratio:a.isObject(i)?i[e]:i,thickness:a.isObject(s)?s[e]:s}),l=this.handleBuilder(n);return l}}),define("backbone-ui-resizable",["require","exports","module","lowercase-backbone","backbone-ui-draggable","jquery","lodash","./__backbone-ui-resizable/handle/index","./__backbone-ui-resizable/handle/helpers","./__backbone-ui-resizable/actions","./__backbone-ui-resizable/animations","./__backbone-ui-resizable/enable-disable","./__backbone-ui-resizable/build-handle"],function(e,t,i){var a=e("lowercase-backbone"),s=e("backbone-ui-draggable"),n=e("jquery"),l=e("lodash"),o=e("./__backbone-ui-resizable/handle/index"),h=e("./__backbone-ui-resizable/handle/helpers"),r=i.exports=s.extend({initialize:function(e){a.view.prototype.initialize.call(this,e),this.initializeModelDock(e),this.initializeUIDraggable(e),this.initializeUIResizable(e)},initializeUIResizable:function(e){this.$canvas=e.canvas||this.canvas||n(window),e.enableDraggable||this.disableDraggable();var t=l.extend({minWidth:2*this.handleOptions.thickness,minHeight:2*this.handleOptions.thickness,width:this.$el.width(),height:this.$el.height()},this.$el.position(),e);this.model.set(t),this.handleOptions=l.extend(this.handleOptions,l.pick(e,["clss","ratio","thickness"]));var i=e.handles||this.handles;i=l.isArray(i)?i:i.split(","),this.handles={},l.each(i,function(e){this.handles[e]=this.buildHandle(e,this.handleOptions)},this),this._initializeResizableEnableDisable()},handleBuilder:o,handles:"n,s,w,e,nw,ne,sw,se",handleOptions:{clss:"handle",ratio:.2,thickness:30},stringifiers:{height:h.stringifyPositionalValue,minHeight:h.stringifyPositionalValue,maxHeight:h.stringifyPositionalValue,width:h.stringifyPositionalValue,minWidth:h.stringifyPositionalValue,maxWidth:h.stringifyPositionalValue,left:h.stringifyPositionalValue,top:h.stringifyPositionalValue},map:{top:"->css:top",left:"->css:left",width:"->css:width",minWidth:"->css:min-width",maxWidth:"->css:max-width",height:"->css:height",minHeight:"->css:min-height",maxHeight:"->css:max-height"}});r.proto(e("./__backbone-ui-resizable/actions")),r.proto(e("./__backbone-ui-resizable/animations")),r.proto(e("./__backbone-ui-resizable/enable-disable")),r.proto(e("./__backbone-ui-resizable/build-handle"))});