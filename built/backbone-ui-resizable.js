//     backbone-ui-resizable
//     (c) simonfan
//     backbone-ui-resizable is licensed under the MIT terms.

define("__backbone-ui-resizable/build-handles",["require","exports","module","jquery","lodash"],function(i,t,e){function s(i,t){var e=t.clss,s=h("<div></div>");return s.addClass(e).addClass(e+"-"+i),s.insertAfter(this.$el)}function n(i,t){if(o.isArray(i)){var e=o.map(i,function(i){return s.call(this,i,t)},this);return o.zipObject(i,e)}return o.isObject(i)?o.mapValues(i,function(i,e){return i=o.isObject(i)?i:this.$el.find(i),0!==i.length?i:s.call(this,e,t)},this):o.isString(i)?(i=i.replace(" ",""),i=i.split(","),n.call(this,i,t)):void 0}function a(i,t){return o.mapValues(i,function(i,e){return this.handleBuilder(o.extend({},t,{el:i,direction:e,resizable:this,thickness:o.isNumber(t.thickness)?t.thickness:t.thickness[e],ratio:o.isNumber(t.ratio)?t.ratio:t.ratio[e],canvas:this.$canvas}))},this)}var h=i("jquery"),o=i("lodash");e.exports=function(i){var t=(i.directions,n.call(this,i.directions,i));this.handles=a.call(this,t,i)}}),define("__backbone-ui-resizable/handle/helpers",["require","exports","module"],function(i,t){t.min=function(i,t){return isNaN(i)?t:isNaN(t)?i:t>i?i:t},t.max=function(i,t){return isNaN(i)?t:isNaN(t)?i:i>t?i:t},t.numberify=function(i){var t=parseInt(i,10);if(isNaN(t))throw new Error(i+" not number");return t}}),define("__backbone-ui-resizable/handle/update",["require","exports","module","./helpers","no"],function(i,t){function e(i){var t=r(this.resizable.model.get("top")).add(i);this.model.set("top",t.value())}function s(i){var t=r(this.resizable.model.get("top"));t.add(this.resizable.model.get("height")).add(i),this.model.set("top",t.value())}function n(i){var t=r(this.resizable.model.get("left"));this.model.set("left",t.add(i).value())}function a(i){var t=r(this.resizable.model.get("left"));t.add(this.resizable.model.get("width")).add(i),this.model.set("left",t.value())}function h(){this.model.set("width",r(this.resizable.model.get("width")).value())}function o(){this.model.set("height",r(this.resizable.model.get("height")).value())}var r=(i("./helpers"),i("no"));t.n=function(){e.call(this,-1*this.outer),n.call(this,0),h.call(this)},t.s=function(){s.call(this,-1*this.inner),n.call(this,0),h.call(this)},t.w=function(){n.call(this,-1*this.outer),e.call(this,0),o.call(this)},t.e=function(){a.call(this,-1*this.inner),e.call(this,0),o.call(this)},t.nw=function(){e.call(this,-1*this.outer),n.call(this,-1*this.outer)},t.ne=function(){e.call(this,-1*this.outer),a.call(this,-1*this.inner)},t.sw=function(){s.call(this,-1*this.inner),n.call(this,-1*this.outer)},t.se=function(){s.call(this,-1*this.inner),a.call(this,-1*this.inner)}}),define("__backbone-ui-resizable/handle/track",["require","exports","module","lodash","./helpers"],function(i,t){var e=i("lodash"),s=i("./helpers");t.all=function(){var i=this.resizable;i.listenTo(this,"movestart",function(){this.trigger("resizestart",i)}),i.listenTo(this,"movestop",function(){this.trigger("resizestop",i)}),this.listenTo(i.model,"change",this.update)},t.n=function(){var i=this.resizable,t=this.direction;i.listenTo(this,"move-y",function(i,n){var a=this.model,h=s.numberify(n.delta),o=s.numberify(a.get("height")),r=s.numberify(a.get("top"));if(a.set({height:o-h,top:r+h}),!n.silent){var l=h>0?"contract":"expand";n=e.assign({action:l,handle:t},n),this.trigger("resize",this,n).trigger("resize-y",this,n).trigger(l,this,n).trigger(l+"y",this,n)}},i)},t.s=function(){var i=this.resizable,t=this.direction;i.listenTo(this,"move-y",function(i,n){var a=this.model,h=s.numberify(a.get("height"))+s.numberify(n.delta);if(a.set("height",h),!n.silent){var o=n.delta>0?"expand":"contract";n=e.assign({action:o,handle:t},n),this.trigger("resize",this,n).trigger("resize-y",this,n).trigger(o,this,n).trigger(o+"y",this,n)}},i)},t.w=function(){var i=this.resizable,t=this.direction;i.listenTo(this,"move-x",function(i,n){var a=this.model,h=s.numberify(n.delta),o=s.numberify(a.get("width")),r=s.numberify(a.get("left"));if(a.set({width:o-h,left:r+h}),!n.silent){var l=h>0?"contract":"expand";n=e.assign({action:l,handle:t},n),this.trigger("resize",this,n).trigger("resize-x",this,n).trigger(l,this,n).trigger(l+"x",this,n)}},i)},t.e=function(){var i=this.resizable,t=this.direction;i.listenTo(this,"move-x",function(i,n){var a=this.model,h=s.numberify(a.get("width"))+s.numberify(n.delta);if(a.set("width",h),!n.silent){var o=n.delta>0?"expand":"contract";n=e.assign({action:o,handle:t},n),this.trigger("resize",this,n).trigger("resize-x",this,n).trigger(o,this,n).trigger(o+"x",this,n)}},i)}}),define("__backbone-ui-resizable/handle/min-max",["require","exports","module","./helpers"],function(i,t){var e=i("./helpers");t.n=function(){var i=this.resizable.model,t=i.get("height"),s=i.get("minHeight"),n=i.get("maxHeight"),a=n-t,h=t-s,o=i.get("minY")||0,r=this.model.get("top");this.model.set({minY:e.max(r-a,o)-this.outer,maxY:r+this.thickness+h})},t.s=function(){var i=this.resizable.model,t=i.get("height"),s=i.get("minHeight"),n=i.get("maxHeight"),a=t-s,h=n-t,o=i.get("maxY")||0,r=this.model.get("top"),l=r+this.thickness;this.model.set({minY:r-a,maxY:e.min(l+h,o+this.outer)})},t.w=function(){var i=this.resizable.model,t=i.get("width"),s=i.get("minWidth"),n=i.get("maxWidth"),a=n-t,h=t-s,o=i.get("minX")||0,r=this.model.get("left");this.model.set({minX:e.max(r-a,o)-this.outer,maxX:r+this.thickness+h})},t.e=function(){var i=this.resizable.model,t=i.get("width"),s=i.get("minWidth"),n=i.get("maxWidth"),a=t-s,h=n-t,o=i.get("maxX"),r=this.model.get("left"),l=r+this.thickness;this.model.set({minX:r-a,maxX:e.min(l+h,o+this.outer)})}}),define("__backbone-ui-resizable/handle/index",["require","exports","module","jquery-ui","backbone-ui-draggable","lodash","./update","./track","./min-max"],function(i,t,e){i("jquery-ui");{var s=i("backbone-ui-draggable"),n=i("lodash"),a=i("./update"),h=i("./track"),o=i("./min-max"),r={n:"left top",s:"left bottom",w:"left top",e:"right top",nw:"left top",ne:"right top",sw:"left bottom",se:"right bottom"},l={n:"y",s:"y",w:"x",e:"x",nw:"xy",ne:"xy",sw:"xy",se:"xy"};e.exports=s.extend({initialize:function(i){s.prototype.initialize.call(this,i),this.initializeResizableHandle(i)},initializeResizableHandle:function(i){this.resizable=i.resizable,this.direction=i.direction,this.axis=l[this.direction],this.thickness=i.thickness,this.setStyles(),this.ratio=i.ratio,this.outer=i.thickness*this.ratio,this.inner=i.thickness-this.outer,this.update=n.throttle(n.bind(a[this.direction],this),20),this.initializePosition(i),this.track(),this.on("movestart",this.calcMinMax)},setStyles:function(){var i,t=this.axis;t.length>1?i={zIndex:100,width:this.thickness,height:this.thickness}:"x"===t?i={zIndex:99,width:this.thickness,height:this.resizable.model.get("width")}:"y"===t&&(i={zIndex:99,width:this.resizable.model.get("height"),height:this.thickness}),this.$el.css(i)},initializePosition:function(){var i=this.$el;i.position({my:"center center",at:r[this.direction],of:this.resizable.$el}),this.model.set(i.position()),this.update()},track:function(){n.each(this.direction,function(i){h[i].call(this)},this),h.all.call(this)},calcMinMax:function(){n.each(this.direction,function(i){o[i].call(this)},this)},map:n.extend(s.prototype.map,{height:"->css:height",width:"->css:width"})})}}),define("__backbone-ui-resizable/actions",["require","exports","module"],function(i,t){t.expandToLeft=function(i,t){t=t||{},t.agent=t.agent||"code";var e=this.handles.w;return e.calcMinMax(),e.moveToLeft(i,t)},t.expandToRight=function(i,t){t=t||{},t.agent=t.agent||"code";var e=this.handles.e;return e.calcMinMax(),e.moveToRight(i,t)},t.expandToTop=function(i,t){t=t||{},t.agent=t.agent||"code";var e=this.handles.n;return e.calcMinMax(),e.moveToTop(i,t)},t.expandToBottom=function(i,t){t=t||{},t.agent=t.agent||"code";var e=this.handles.s;return e.calcMinMax(),e.moveToBottom(i,t)},t.contractToRight=function(i,t){t=t||{},t.agent=t.agent||"code";var e=this.handles.w;return e.calcMinMax(),e.moveToRight(i,t)},t.contractToLeft=function(i,t){t=t||{},t.agent=t.agent||"code";var e=this.handles.e;return e.calcMinMax(),e.moveToLeft(i,t)},t.contractToBottom=function(i,t){t=t||{},t.agent=t.agent||"code";var e=this.handles.n;return e.calcMinMax(),e.moveToBottom(i,t)},t.contractToTop=function(i,t){t=t||{},t.agent=t.agent||"code";var e=this.handles.s;return e.calcMinMax(),e.moveToTop(i,t)}}),define("backbone-ui-resizable",["require","exports","module","lowercase-backbone","backbone-ui-draggable","jquery","lodash","./__backbone-ui-resizable/build-handles","./__backbone-ui-resizable/handle/index","./__backbone-ui-resizable/actions"],function(i,t,e){function s(i){return c.test(i)?i+"px":i}var n=i("lowercase-backbone"),a=i("backbone-ui-draggable"),h=i("jquery"),o=i("lodash"),r=i("./__backbone-ui-resizable/build-handles"),l=i("./__backbone-ui-resizable/handle/index"),c=/^[0-9]+$/,d=e.exports=a.extend({initialize:function(i){n.view.prototype.initialize.call(this,i),this.initializeModelDock(i),this.initializeUIDraggable(i),this.initializeUIResizable(i)},initializeUIResizable:function(i){this.$canvas=i.canvas||this.canvas||h(window);var t=o.extend({minWidth:2*this.handleOptions.thickness,minHeight:2*this.handleOptions.thickness,width:this.$el.width(),height:this.$el.height()},this.$el.position(),i);this.model.set(t);var e=o.defaults(o.pick(i,["directions","clss","ratio","thickness"]),this.handleOptions);r.call(this,e)},handleBuilder:l,handleOptions:{directions:"n,s,w,e,nw,ne,sw,se",clss:"handle",ratio:.2,thickness:30},stringifiers:{height:s,minHeight:s,maxHeight:s,width:s,minWidth:s,maxWidth:s,left:s,top:s},map:{top:"->css:top",left:"->css:left",width:"->css:width",minWidth:"->css:min-width",maxWidth:"->css:max-width",height:"->css:height",minHeight:"->css:min-height",maxHeight:"->css:max-height"}});d.proto(i("./__backbone-ui-resizable/actions"))});